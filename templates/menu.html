{% extends "base.html" %} {% block head %}
<script>
    function goToConversationMode() {
        location.href = "{{ url_for('chatroom') }}";
    }

    function joinChatRoom() {
        location.href = "{{ url_for('join_chatroom') }}";
    }
</script>
{% endblock %} {% block content %}
<h4 id="welcome-message"></h4>
{% if name %}
<h4>{{ name }} 님, 환영합니다!</h4>
{% else %}
<p>Error</p>
{% endif %}
<button class="open">대화모드</button>
<button class="open_X">영상시청모드</button>
<div class="container">
    <div class="modal">
        <button id="close" onclick="goToConversationMode()">방 생성</button>
        <button id="input_c" onclick="joinChatRoom()">코드 입력</button>
        <button class="close">Close</button>
    </div>
</div>
<script>
    const openButton = document.querySelector('.open');
    const container = document.querySelector('.container');
    const closeButton = document.querySelector('.close');

    openButton.addEventListener('click', () => {
        container.style.display = 'flex';

    });

    closeButton.addEventListener('click', () => {
        container.style.display = 'none';

    });

    function getCookie(name) {
        console.log("name",name)
        var value = "; " + document.cookie;
        console.log("value",value)
        var parts = value.split("; " + name + "=");
        if (parts.length === 2) {
            return parts.pop().split(";").shift();
        }
    }

    document.addEventListener("DOMContentLoaded", function() {
        var welcomeMessage = document.getElementById("welcome-message");

        var token = getCookie("token"); // 토큰 값 가져오기
        console.log("token",token)
        if (token) {
            // 토큰이 존재할 경우 처리할 내용
            // 예: 토큰을 해독하여 사용자 정보 가져오기 등
            welcomeMessage.textContent = "토큰을 확인했습니다.";
        } else {
            welcomeMessage.textContent = "토큰이 없습니다.";
        }
    });

</script>
{% endblock %}